{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.235.1"},"children":{"users-dev-stack":{"id":"users-dev-stack","path":"users-dev-stack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.235.1"},"children":{"Tables":{"id":"Tables","path":"users-dev-stack/Tables","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"UsersTable":{"id":"UsersTable","path":"users-dev-stack/Tables/UsersTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Tables/UsersTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"ScalingRole":{"id":"ScalingRole","path":"users-dev-stack/Tables/UsersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}}}},"IdempotencyTable":{"id":"IdempotencyTable","path":"users-dev-stack/Tables/IdempotencyTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Tables/IdempotencyTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"PK","keyType":"HASH"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":true},"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"users-dev-stack/Tables/IdempotencyTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}}}}}},"EventBus":{"id":"EventBus","path":"users-dev-stack/EventBus","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"UserAuditEventBus":{"id":"UserAuditEventBus","path":"users-dev-stack/EventBus/UserAuditEventBus","constructInfo":{"fqn":"aws-cdk-lib.aws_events.EventBus","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/EventBus/UserAuditEventBus/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnEventBus","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::EventBus","aws:cdk:cloudformation:props":{"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"description":"Event bus for User Management Service audit events","name":"user-management-audit-events"}}}}},"AuditLogGroup":{"id":"AuditLogGroup","path":"users-dev-stack/EventBus/AuditLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/EventBus/AuditLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/events/user-management/audit","retentionInDays":365,"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}}}},"AuditEventRule":{"id":"AuditEventRule","path":"users-dev-stack/EventBus/AuditEventRule","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Rule","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/EventBus/AuditEventRule/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnRule","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Rule","aws:cdk:cloudformation:props":{"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"description":"Route all user audit events to CloudWatch Logs","eventBusName":{"Ref":"EventBusUserAuditEventBus5BF0A895"},"eventPattern":{"detail-type":["UserAuditEvent"],"source":["user-management.users"]},"name":"user-audit-to-cloudwatch","state":"ENABLED","targets":[{"id":"Target0","arn":{"Fn::Join":["",["arn:aws:logs:ap-south-1:320644769527:log-group:",{"Ref":"EventBusAuditLogGroup7EE4E105"}]]}}]}}}}},"AuditEventArchive":{"id":"AuditEventArchive","path":"users-dev-stack/EventBus/AuditEventArchive","constructInfo":{"fqn":"aws-cdk-lib.aws_events.Archive","version":"2.235.1","metadata":[]},"children":{"Archive":{"id":"Archive","path":"users-dev-stack/EventBus/AuditEventArchive/Archive","constructInfo":{"fqn":"aws-cdk-lib.aws_events.CfnArchive","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Events::Archive","aws:cdk:cloudformation:props":{"archiveName":"user-management-audit-archive","description":"Archive of all user management audit events for compliance","eventPattern":{"detail-type":["UserAuditEvent"],"source":["user-management.users"]},"kmsKeyIdentifier":"","retentionDays":365,"sourceArn":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}}}}}}},"EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D":{"id":"EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D","constructInfo":{"fqn":"aws-cdk-lib.custom_resources.AwsCustomResource","version":"2.235.1"},"children":{"Provider":{"id":"Provider","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D/Provider","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.SingletonFunction","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D/Resource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.235.1","metadata":[]},"children":{"Default":{"id":"Default","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D/Resource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"CustomResourcePolicy":{"id":"CustomResourcePolicy","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D/CustomResourcePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367D/CustomResourcePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:DeleteResourcePolicy","logs:PutResourcePolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"EventsLogGroupPolicyusersdevstackEventBusAuditEventRuleDB65367DCustomResourcePolicyB6D885A3","roles":[{"Ref":"AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2"}]}}}}}}},"AWS679f53fac002430cb0da5b7982bd2287":{"id":"AWS679f53fac002430cb0da5b7982bd2287","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}}}},"Code":{"id":"Code","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/AWS679f53fac002430cb0da5b7982bd2287/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"bc8ef58951f4c88e641dd23090e9d2e2e61c7530a07960e767522941e959b625.zip"},"handler":"index.handler","role":{"Fn::GetAtt":["AWS679f53fac002430cb0da5b7982bd2287ServiceRoleC1EA0FF2","Arn"]},"runtime":"nodejs22.x","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":120}}}}},"Lambdas":{"id":"Lambdas","path":"users-dev-stack/Lambdas","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"DependenciesLayer":{"id":"DependenciesLayer","path":"users-dev-stack/Lambdas/DependenciesLayer","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.LayerVersion","version":"2.235.1","metadata":[]},"children":{"Code":{"id":"Code","path":"users-dev-stack/Lambdas/DependenciesLayer/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/DependenciesLayer/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/DependenciesLayer/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/DependenciesLayer/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnLayerVersion","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::LayerVersion","aws:cdk:cloudformation:props":{"compatibleRuntimes":["python3.11"],"content":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"381e506b5923cad5c8a90559c5b32848b9fe6d9fcd08ef5b56831d9da4e4d7ba.zip"},"description":"Python dependencies: python-ulid"}}}}},"RegisterLambda":{"id":"RegisterLambda","path":"users-dev-stack/Lambdas/RegisterLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/RegisterLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/RegisterLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RegisterLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/RegisterLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RegisterLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TablesIdempotencyTable9CFEB1A0","Arn"]},{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasRegisterLambdaServiceRoleDefaultPolicy408E419F","roles":[{"Ref":"LambdasRegisterLambdaServiceRoleBD6137F5"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/RegisterLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/RegisterLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/RegisterLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RegisterLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"e82320397c63e13a71517a8ade7b9e179639420f2a8f69943eaf557bb12a360d.zip"},"description":"User registration - creates new users with email uniqueness validation","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"},"IDEMPOTENCY_TABLE_NAME":{"Ref":"TablesIdempotencyTable9CFEB1A0"},"EVENT_BUS_NAME":{"Ref":"EventBusUserAuditEventBus5BF0A895"}}},"functionName":"users-register-create","handler":"handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasRegisterLambdaServiceRoleBD6137F5","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"ProfileGetLambda":{"id":"ProfileGetLambda","path":"users-dev-stack/Lambdas/ProfileGetLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/ProfileGetLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/ProfileGetLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileGetLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/ProfileGetLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileGetLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasProfileGetLambdaServiceRoleDefaultPolicy09BE9169","roles":[{"Ref":"LambdasProfileGetLambdaServiceRole21355109"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/ProfileGetLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/ProfileGetLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/ProfileGetLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileGetLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"d69d950443ede8ae45eecb6434d01f5c0be75b818062497554368c350d073b29.zip"},"description":"User profile retrieval - gets user by ID","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"}}},"functionName":"users-profile-get","handler":"get_handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasProfileGetLambdaServiceRole21355109","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"ProfileUpdateLambda":{"id":"ProfileUpdateLambda","path":"users-dev-stack/Lambdas/ProfileUpdateLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["TablesIdempotencyTable9CFEB1A0","Arn"]},{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}]},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasProfileUpdateLambdaServiceRoleDefaultPolicy35211C8B","roles":[{"Ref":"LambdasProfileUpdateLambdaServiceRole9B85C7C4"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ProfileUpdateLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"4c64a44b81d1ce721e187984516dfca3e4c3704a45b6a28764667829c144ae57.zip"},"description":"User profile update - updates user name and metadata","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"},"IDEMPOTENCY_TABLE_NAME":{"Ref":"TablesIdempotencyTable9CFEB1A0"},"EVENT_BUS_NAME":{"Ref":"EventBusUserAuditEventBus5BF0A895"}}},"functionName":"users-profile-update","handler":"update_handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasProfileUpdateLambdaServiceRole9B85C7C4","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"StatusUpdateLambda":{"id":"StatusUpdateLambda","path":"users-dev-stack/Lambdas/StatusUpdateLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/StatusUpdateLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/StatusUpdateLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/StatusUpdateLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/StatusUpdateLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/StatusUpdateLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasStatusUpdateLambdaServiceRoleDefaultPolicy91F7F2C9","roles":[{"Ref":"LambdasStatusUpdateLambdaServiceRole895F24A7"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/StatusUpdateLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/StatusUpdateLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/StatusUpdateLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/StatusUpdateLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"d108edd00383ef86fdd8ed264937a1a63966f477140460f6b8f2a5c333cc1bbb.zip"},"description":"User status management - updates user status lifecycle","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"},"EVENT_BUS_NAME":{"Ref":"EventBusUserAuditEventBus5BF0A895"}}},"functionName":"users-status-update","handler":"handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasStatusUpdateLambdaServiceRole895F24A7","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"RoleAssignLambda":{"id":"RoleAssignLambda","path":"users-dev-stack/Lambdas/RoleAssignLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/RoleAssignLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/RoleAssignLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleAssignLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/RoleAssignLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleAssignLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasRoleAssignLambdaServiceRoleDefaultPolicyAB815506","roles":[{"Ref":"LambdasRoleAssignLambdaServiceRole283E1B18"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/RoleAssignLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/RoleAssignLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/RoleAssignLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleAssignLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"d364ea38079e0d86a345bb05aade745827e2d37fc1d9b119926d23c439170f21.zip"},"description":"Role assignment - assigns roles to users","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"},"EVENT_BUS_NAME":{"Ref":"EventBusUserAuditEventBus5BF0A895"}}},"functionName":"users-role-assign","handler":"assign_handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasRoleAssignLambdaServiceRole283E1B18","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"RoleRemoveLambda":{"id":"RoleRemoveLambda","path":"users-dev-stack/Lambdas/RoleRemoveLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/RoleRemoveLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/RoleRemoveLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleRemoveLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/RoleRemoveLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleRemoveLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}},{"Action":"events:PutEvents","Effect":"Allow","Resource":{"Fn::GetAtt":["EventBusUserAuditEventBus5BF0A895","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasRoleRemoveLambdaServiceRoleDefaultPolicy6860E681","roles":[{"Ref":"LambdasRoleRemoveLambdaServiceRole6895456B"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/RoleRemoveLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/RoleRemoveLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/RoleRemoveLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/RoleRemoveLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"f7ba9acff16c5a3a87b42367c8cffdf691882c3429dbf81e62d65b0298457a72.zip"},"description":"Role removal - removes roles from users","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"},"EVENT_BUS_NAME":{"Ref":"EventBusUserAuditEventBus5BF0A895"}}},"functionName":"users-role-remove","handler":"remove_handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasRoleRemoveLambdaServiceRole6895456B","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"ListQueryLambda":{"id":"ListQueryLambda","path":"users-dev-stack/Lambdas/ListQueryLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/ListQueryLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/ListQueryLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ListQueryLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/ListQueryLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ListQueryLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasListQueryLambdaServiceRoleDefaultPolicyF1E49238","roles":[{"Ref":"LambdasListQueryLambdaServiceRole5C41D780"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/ListQueryLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/ListQueryLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/ListQueryLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/ListQueryLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"8413ff910a4b02cbb53e95105f3f22cef067f1a76eb85817c4854b1cd1a933c2.zip"},"description":"User listing - queries users by status with pagination","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"}}},"functionName":"users-list-query","handler":"handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasListQueryLambdaServiceRole5C41D780","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}},"AuditQueryLambda":{"id":"AuditQueryLambda","path":"users-dev-stack/Lambdas/AuditQueryLambda","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.235.1","metadata":[]},"children":{"ServiceRole":{"id":"ServiceRole","path":"users-dev-stack/Lambdas/AuditQueryLambda/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"users-dev-stack/Lambdas/AuditQueryLambda/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/AuditQueryLambda/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"users-dev-stack/Lambdas/AuditQueryLambda/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/AuditQueryLambda/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["xray:PutTelemetryRecords","xray:PutTraceSegments"],"Effect":"Allow","Resource":"*"},{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":{"Fn::GetAtt":["TablesUsersTable160FE13D","Arn"]}}],"Version":"2012-10-17"},"policyName":"LambdasAuditQueryLambdaServiceRoleDefaultPolicy0D6C7F2D","roles":[{"Ref":"LambdasAuditQueryLambdaServiceRole3BA6F05B"}]}}}}}}},"Code":{"id":"Code","path":"users-dev-stack/Lambdas/AuditQueryLambda/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.235.1"},"children":{"Stage":{"id":"Stage","path":"users-dev-stack/Lambdas/AuditQueryLambda/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.235.1"}},"AssetBucket":{"id":"AssetBucket","path":"users-dev-stack/Lambdas/AuditQueryLambda/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.235.1","metadata":[]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Lambdas/AuditQueryLambda/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-320644769527-ap-south-1","s3Key":"7df16d00a7d83a4ac3266eeaa1915efd5c92a5b0620ddd5ad0ce2ac942340d93.zip"},"description":"Audit log retrieval - queries audit events for users","environment":{"variables":{"USERS_TABLE_NAME":{"Ref":"TablesUsersTable160FE13D"}}},"functionName":"users-audit-query","handler":"handler.handler","layers":[{"Ref":"LambdasDependenciesLayer05B94269"}],"memorySize":256,"role":{"Fn::GetAtt":["LambdasAuditQueryLambdaServiceRole3BA6F05B","Arn"]},"runtime":"python3.11","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"timeout":30,"tracingConfig":{"mode":"Active"}}}}}}}},"Api":{"id":"Api","path":"users-dev-stack/Api","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"UserManagementApi":{"id":"UserManagementApi","path":"users-dev-stack/Api/UserManagementApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"User Management Service REST API","name":"user-management-api","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"users-dev-stack/Api/UserManagementApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.235.1","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"users-dev-stack/Api/UserManagementApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.235.1","metadata":[]}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}]}}}}},"Account":{"id":"Account","path":"users-dev-stack/Api/UserManagementApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["ApiUserManagementApiCloudWatchRoleAEA1059C","Arn"]}}}},"Deployment":{"id":"Deployment","path":"users-dev-stack/Api/UserManagementApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"User Management Service REST API","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"users-dev-stack/Api/UserManagementApi/DeploymentStage.prod","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/DeploymentStage.prod/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"ApiUserManagementApiDeployment6EB49DB28398104a7779cb629b441f4c97fc4a31"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":true,"loggingLevel":"INFO","metricsEnabled":true,"throttlingBurstLimit":2000,"throttlingRateLimit":1000}],"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"stageName":"prod","tags":[{"key":"Domain","value":"users"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Service","value":"user-management"}],"tracingEnabled":true}}}}},"Endpoint":{"id":"Endpoint","path":"users-dev-stack/Api/UserManagementApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"Default":{"id":"Default","path":"users-dev-stack/Api/UserManagementApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.235.1","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["ApiUserManagementApi8B5997A1","RootResourceId"]},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"users":{"id":"users","path":"users-dev-stack/Api/UserManagementApi/Default/users","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["ApiUserManagementApi8B5997A1","RootResourceId"]},"pathPart":"users","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusers29506F29"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"POST":{"id":"POST","path":"users-dev-stack/Api/UserManagementApi/Default/users/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users","path":"users-dev-stack/Api/UserManagementApi/Default/users/POST/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRegisterLambda70BC60D5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/POST/users"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users","path":"users-dev-stack/Api/UserManagementApi/Default/users/POST/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRegisterLambda70BC60D5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/POST/users"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasRegisterLambda70BC60D5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"201","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"409"},{"statusCode":"500"}],"requestModels":{"application/json":{"Ref":"ApiUserManagementApiRegistrationModelCC97A2F7"}},"requestValidatorId":{"Ref":"ApiBodyValidatorB3E71016"},"resourceId":{"Ref":"ApiUserManagementApiusers29506F29"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"GET":{"id":"GET","path":"users-dev-stack/Api/UserManagementApi/Default/users/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users","path":"users-dev-stack/Api/UserManagementApi/Default/users/GET/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasListQueryLambda62647465","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/GET/users"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users","path":"users-dev-stack/Api/UserManagementApi/Default/users/GET/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasListQueryLambda62647465","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/GET/users"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasListQueryLambda62647465","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"500"}],"requestParameters":{"method.request.querystring.limit":false,"method.request.querystring.nextToken":false,"method.request.querystring.status":false},"requestValidatorId":{"Ref":"ApiParamsValidatorFAA8F165"},"resourceId":{"Ref":"ApiUserManagementApiusers29506F29"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"{userId}":{"id":"{userId}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiUserManagementApiusers29506F29"},"pathPart":"{userId}","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"GET":{"id":"GET","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/GET/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasProfileGetLambdaE52FE42A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/GET/users/*"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/GET/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasProfileGetLambdaE52FE42A","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/GET/users/*"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasProfileGetLambdaE52FE42A","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"500"}],"requestParameters":{"method.request.path.userId":true},"requestValidatorId":{"Ref":"ApiParamsValidatorFAA8F165"},"resourceId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"PATCH":{"id":"PATCH","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/PATCH","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/PATCH/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasProfileUpdateLambdaACEF4438","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/PATCH/users/*"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/PATCH/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PATCH..users.{userId}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasProfileUpdateLambdaACEF4438","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/PATCH/users/*"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/PATCH/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"PATCH","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasProfileUpdateLambdaACEF4438","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"409"},{"statusCode":"500"}],"requestModels":{"application/json":{"Ref":"ApiUserManagementApiProfileUpdateModelE8202D00"}},"requestParameters":{"method.request.path.userId":true},"requestValidatorId":{"Ref":"ApiBodyValidatorB3E71016"},"resourceId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"status":{"id":"status","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"pathPart":"status","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusersuserIdstatus8D1B6D20"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"PUT":{"id":"PUT","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/PUT","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/PUT/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasStatusUpdateLambda47C81393","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/PUT/users/*/status"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/PUT/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.PUT..users.{userId}.status","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasStatusUpdateLambda47C81393","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/PUT/users/*/status"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/status/PUT/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"PUT","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasStatusUpdateLambda47C81393","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"500"}],"requestModels":{"application/json":{"Ref":"ApiUserManagementApiStatusUpdateModel33D9BEB2"}},"requestParameters":{"method.request.path.userId":true},"requestValidatorId":{"Ref":"ApiBodyValidatorB3E71016"},"resourceId":{"Ref":"ApiUserManagementApiusersuserIdstatus8D1B6D20"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}}}},"roles":{"id":"roles","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"pathPart":"roles","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusersuserIdroles18B3C8F2"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"POST":{"id":"POST","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/POST","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/POST/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRoleAssignLambda3BA828D5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/POST/users/*/roles"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/POST/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.POST..users.{userId}.roles","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRoleAssignLambda3BA828D5","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/POST/users/*/roles"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/POST/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasRoleAssignLambda3BA828D5","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"500"}],"requestModels":{"application/json":{"Ref":"ApiUserManagementApiRoleAssignModel0109A992"}},"requestParameters":{"method.request.path.userId":true},"requestValidatorId":{"Ref":"ApiBodyValidatorB3E71016"},"resourceId":{"Ref":"ApiUserManagementApiusersuserIdroles18B3C8F2"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"{role}":{"id":"{role}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiUserManagementApiusersuserIdroles18B3C8F2"},"pathPart":"{role}","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusersuserIdrolesrole3B9A9515"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"DELETE":{"id":"DELETE","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/DELETE","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/DELETE/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRoleRemoveLambdaA5778CAE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/DELETE/users/*/roles/*"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/DELETE/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.DELETE..users.{userId}.roles.{role}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasRoleRemoveLambdaA5778CAE","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/DELETE/users/*/roles/*"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/roles/{role}/DELETE/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"DELETE","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasRoleRemoveLambdaA5778CAE","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"500"}],"requestParameters":{"method.request.path.userId":true,"method.request.path.role":true},"requestValidatorId":{"Ref":"ApiParamsValidatorFAA8F165"},"resourceId":{"Ref":"ApiUserManagementApiusersuserIdrolesrole3B9A9515"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}}}}}},"audit":{"id":"audit","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"ApiUserManagementApiusersuserId9F39CAFB"},"pathPart":"audit","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}},"OPTIONS":{"id":"OPTIONS","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"ApiUserManagementApiusersuserIdauditED30FAF2"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}},"GET":{"id":"GET","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/GET","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.235.1","metadata":[]},"children":{"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit":{"id":"ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/GET/ApiPermission.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasAuditQueryLambda24CA3A04","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/",{"Ref":"ApiUserManagementApiDeploymentStageprod38F7F89F"},"/GET/users/*/audit"]]}}}},"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit":{"id":"ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/GET/ApiPermission.Test.usersdevstackApiUserManagementApiA7C01D2B.GET..users.{userId}.audit","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["LambdasAuditQueryLambda24CA3A04","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:ap-south-1:320644769527:",{"Ref":"ApiUserManagementApi8B5997A1"},"/test-invoke-stage/GET/users/*/audit"]]}}}},"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/Default/users/{userId}/audit/GET/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:ap-south-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["LambdasAuditQueryLambda24CA3A04","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"methodResponses":[{"statusCode":"200","responseModels":{"application/json":"Empty"}},{"statusCode":"400"},{"statusCode":"401"},{"statusCode":"404"},{"statusCode":"500"}],"requestParameters":{"method.request.path.userId":true,"method.request.querystring.limit":false,"method.request.querystring.nextToken":false},"requestValidatorId":{"Ref":"ApiParamsValidatorFAA8F165"},"resourceId":{"Ref":"ApiUserManagementApiusersuserIdauditED30FAF2"},"restApiId":{"Ref":"ApiUserManagementApi8B5997A1"}}}}}}}}}}}}}},"RegistrationModel":{"id":"RegistrationModel","path":"users-dev-stack/Api/UserManagementApi/RegistrationModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/RegistrationModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"RegistrationRequest","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"schema":{"properties":{"idempotencyKey":{"minLength":1,"type":"string"},"email":{"format":"email","minLength":1,"type":"string"},"name":{"minLength":1,"type":"string"},"metadata":{"type":"object"}},"required":["idempotencyKey","email","name"],"$schema":"http://json-schema.org/draft-04/schema#","title":"User Registration Request","type":"object"}}}}}},"ProfileUpdateModel":{"id":"ProfileUpdateModel","path":"users-dev-stack/Api/UserManagementApi/ProfileUpdateModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/ProfileUpdateModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"ProfileUpdateRequest","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"schema":{"properties":{"idempotencyKey":{"minLength":1,"type":"string"},"name":{"minLength":1,"type":"string"},"metadata":{"type":"object"}},"required":["idempotencyKey"],"$schema":"http://json-schema.org/draft-04/schema#","title":"Profile Update Request","type":"object"}}}}}},"StatusUpdateModel":{"id":"StatusUpdateModel","path":"users-dev-stack/Api/UserManagementApi/StatusUpdateModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/StatusUpdateModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"StatusUpdateRequest","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"schema":{"properties":{"status":{"enum":["active","disabled","deleted"],"type":"string"}},"required":["status"],"$schema":"http://json-schema.org/draft-04/schema#","title":"Status Update Request","type":"object"}}}}}},"RoleAssignModel":{"id":"RoleAssignModel","path":"users-dev-stack/Api/UserManagementApi/RoleAssignModel","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Model","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/UserManagementApi/RoleAssignModel/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnModel","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Model","aws:cdk:cloudformation:props":{"contentType":"application/json","name":"RoleAssignRequest","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"schema":{"properties":{"role":{"minLength":1,"type":"string"}},"required":["role"],"$schema":"http://json-schema.org/draft-04/schema#","title":"Role Assignment Request","type":"object"}}}}}}}},"BodyValidator":{"id":"BodyValidator","path":"users-dev-stack/Api/BodyValidator","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestValidator","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/BodyValidator/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRequestValidator","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RequestValidator","aws:cdk:cloudformation:props":{"name":"body-validator","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"validateRequestBody":true,"validateRequestParameters":true}}}}},"ParamsValidator":{"id":"ParamsValidator","path":"users-dev-stack/Api/ParamsValidator","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RequestValidator","version":"2.235.1","metadata":[]},"children":{"Resource":{"id":"Resource","path":"users-dev-stack/Api/ParamsValidator/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRequestValidator","version":"2.235.1"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RequestValidator","aws:cdk:cloudformation:props":{"name":"params-validator","restApiId":{"Ref":"ApiUserManagementApi8B5997A1"},"validateRequestBody":false,"validateRequestParameters":true}}}}}}},"ApiEndpointUrl":{"id":"ApiEndpointUrl","path":"users-dev-stack/ApiEndpointUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"ApiId":{"id":"ApiId","path":"users-dev-stack/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"UsersTableName":{"id":"UsersTableName","path":"users-dev-stack/UsersTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"IdempotencyTableName":{"id":"IdempotencyTableName","path":"users-dev-stack/IdempotencyTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"EventBusName":{"id":"EventBusName","path":"users-dev-stack/EventBusName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"EventBusArn":{"id":"EventBusArn","path":"users-dev-stack/EventBusArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.235.1"}},"CDKMetadata":{"id":"CDKMetadata","path":"users-dev-stack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"},"children":{"Default":{"id":"Default","path":"users-dev-stack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.235.1"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"users-dev-stack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.235.1"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"users-dev-stack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.235.1"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.5"}}}}}